
import os
import json
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np
#import matplotlib

dirname, filename = os.path.split(os.path.abspath(__file__))

address = "\\AMOEA_MAP_Package\\pareto_fronts_json\\G7_2D.json"
obj_num = 2
#APM_Pareto_IGD_10000FE = [[356.7654320987655, -0.20634920634920625, -0.19519519519519518],[356.7654320987655, -0.20634920634920625, -0.19519519519519518],[358.01836547291094, -0.1774891774891774, -0.20229320229320227],[358.01836547291094, -0.1774891774891774, -0.20229320229320227],[359.89164370982553, -0.2640692640692643, -0.180999180999181],[359.89164370982553, -0.2640692640692643, -0.180999180999181],[361.14865830017345, -0.1486291486291488, -0.20939120939120934],[361.14865830017345, -0.1486291486291488, -0.20939120939120934],[364.2707886950311, -0.2929292929292929, -0.17390117390117393],[364.2707886950311, -0.2929292929292929, -0.17390117390117393],[366.15631058055305, -0.11976911976911953, -0.21648921648921648],[366.15631058055305, -0.11976911976911953, -0.21648921648921648],[370.52729313335374, -0.32178932178932174, -0.16680316680316679],[370.52729313335374, -0.32178932178932174, -0.16680316680316679],[373.0413223140496, -0.09090909090909105, -0.22358722358722358],[373.0413223140496, -0.09090909090909105, -0.22358722358722358],[378.6611570247934, -0.3506493506493506, -0.15970515970515967],[378.6611570247934, -0.3506493506493506, -0.15970515970515967],[381.80369350066314, -0.06204906204906219, -0.23068523068523064],[381.80369350066314, -0.06204906204906219, -0.23068523068523064],[388.67238036935015, -0.37950937950937974, -0.15260715260715255],[388.67238036935015, -0.37950937950937974, -0.15260715260715255],[392.4434241403939, -0.03318903318903305, -0.2377832377832378],[392.4434241403939, -0.03318903318903305, -0.2377832377832378],[400.5609631670237, -0.4083694083694082, -0.14550914550914554],[400.5609631670237, -0.4083694083694082, -0.14550914550914554],[404.96051423324144, -0.004329004329004452, -0.24488124488124485],[404.96051423324144, -0.004329004329004452, -0.24488124488124485],[414.3269054178145, -0.43722943722943725, -0.13841113841113842],[414.3269054178145, -0.43722943722943725, -0.13841113841113842],[419.3549637792063, 0.024531024531024823, -0.251979251979252],[419.3549637792063, 0.024531024531024823, -0.251979251979252],[429.97020712172235, -0.46608946608946616, -0.1313131313131313],[429.97020712172235, -0.46608946608946616, -0.1313131313131313],[435.6267727782879, 0.05339105339105329, -0.2590772590772591],[435.6267727782879, 0.05339105339105329, -0.2590772590772591],[447.49086827874714, -0.49494949494949503, -0.12421512421512418],[447.49086827874714, -0.49494949494949503, -0.12421512421512418],[453.7759412304866, 0.08225108225108216, -0.26617526617526605],[453.7759412304866, 0.08225108225108216, -0.26617526617526605],[466.88888888888886, -0.5238095238095237, -0.11711711711711714],[466.88888888888886, -0.5238095238095237, -0.11711711711711714],[473.80246913580254, 0.11111111111111102, -0.2732732732732733],[473.80246913580254, 0.11111111111111102, -0.2732732732732733],[488.16426895214767, -0.5526695526695526, -0.11001911001911004],[488.16426895214767, -0.5526695526695526, -0.11001911001911004],[495.70635649423514, 0.13997113997113989, -0.28037128037128034],[495.70635649423514, 0.13997113997113989, -0.28037128037128034],[511.3170084685237, -0.5815295815295816, -0.10292110292110293],[511.3170084685237, -0.5815295815295816, -0.10292110292110293],[519.487603305785, 0.16883116883116875, -0.2874692874692874],[519.487603305785, 0.16883116883116875, -0.2874692874692874],[536.3471074380166, -0.6103896103896104, -0.0958230958230958],[536.3471074380166, -0.6103896103896104, -0.0958230958230958],[545.146209570452, 0.1976911976911976, -0.29456729456729464],[545.146209570452, 0.1976911976911976, -0.29456729456729464],[502.4364033880989, -0.3731338009717625, -0.3610405065904502],[502.4364033880989, -0.3731338009717625, -0.3610405065904502],[563.2545658606266, -0.6392496392496393, -0.08872508872508868],[563.2545658606266, -0.6392496392496393, -0.08872508872508868],[572.6821752882357, 0.2265512265512265, -0.30166530166530153],[572.6821752882357, 0.2265512265512265, -0.30166530166530153],[592.0393837363533, -0.668109668109668, -0.08162708162708165],[592.0393837363533, -0.668109668109668, -0.08162708162708165],[602.095500459137, 0.25541125541125537, -0.30876330876330876],[602.095500459137, 0.25541125541125537, -0.30876330876330876],[622.7015610651974, -0.696969696969697, -0.07452907452907453],[622.7015610651974, -0.696969696969697, -0.07452907452907453],[633.3861850831547, 0.28427128427128423, -0.31586131586131583],[633.3861850831547, 0.28427128427128423, -0.31586131586131583],[655.2410978471586, -0.7258297258297259, -0.0674310674310674],[655.2410978471586, -0.7258297258297259, -0.0674310674310674],[666.5542291602895, 0.3131313131313131, -0.32295932295932295],[666.5542291602895, 0.3131313131313131, -0.32295932295932295],[689.6579940822367, -0.7546897546897547, -0.0603330603330603],[689.6579940822367, -0.7546897546897547, -0.0603330603330603],[701.5996326905419, 0.34199134199134196, -0.3300573300573301],[701.5996326905419, 0.34199134199134196, -0.3300573300573301],[725.9522497704315, -0.7835497835497834, -0.05323505323505325],[725.9522497704315, -0.7835497835497834, -0.05323505323505325],[738.5223956739106, 0.3708513708513708, -0.3371553371553371],[738.5223956739106, 0.3708513708513708, -0.3371553371553371],[764.1238649117437, -0.8124098124098125, -0.04613704613704614],[764.1238649117437, -0.8124098124098125, -0.04613704613704614],[777.3225181103971, 0.3997113997113997, -0.3442533442533443],[777.3225181103971, 0.3997113997113997, -0.3442533442533443],[804.172839506173, -0.8412698412698414, -0.03903903903903903],[804.172839506173, -0.8412698412698414, -0.03903903903903903],[818.0, 0.42857142857142855, -0.35135135135135137],[818.0, 0.42857142857142855, -0.35135135135135137],[846.0991735537192, -0.8701298701298702, -0.031941031941031914],[846.0991735537192, -0.8701298701298702, -0.031941031941031914],[889.902867054382, -0.898989898989899, -0.024843024843024863],[889.902867054382, -0.898989898989899, -0.024843024843024863],[935.5839200081624, -0.9278499278499278, -0.01774501774501775],[935.5839200081624, -0.9278499278499278, -0.01774501774501775],[983.1423324150597, -0.9567099567099567, -0.010647010647010638],[983.1423324150597, -0.9567099567099567, -0.010647010647010638],[1032.5781042750743, -0.9855699855699857, -0.003549003549003525],[1032.5781042750743, -0.9855699855699857, -0.003549003549003525],[1083.8912355882053, -1.0144300144300142, 0.003549003549003525],[1083.8912355882053, -1.0144300144300142, 0.003549003549003525],[1137.0817263544536, -1.0432900432900434, 0.010647010647010638],[1137.0817263544536, -1.0432900432900434, 0.010647010647010638],[1192.149576573819, -1.072150072150072, 0.01774501774501775],[1192.149576573819, -1.072150072150072, 0.01774501774501775],[1249.0947862463017, -1.101010101010101, 0.024843024843024863],[1249.0947862463017, -1.101010101010101, 0.024843024843024863],[1307.917355371901, -1.1298701298701301, 0.031941031941031976],[1307.917355371901, -1.1298701298701301, 0.031941031941031976],[1368.6172839506173, -1.1587301587301586, 0.03903903903903903],[1368.6172839506173, -1.1587301587301586, 0.03903903903903903],[1431.1945719824507, -1.1875901875901875, 0.04613704613704614],[1431.1945719824507, -1.1875901875901875, 0.04613704613704614],[1495.6492194674015, -1.2164502164502164, 0.05323505323505325],[1495.6492194674015, -1.2164502164502164, 0.05323505323505325],[1561.9812264054692, -1.2453102453102456, 0.06033306033306036],[1561.9812264054692, -1.2453102453102456, 0.06033306033306036],[1630.1905927966534, -1.274170274170274, 0.0674310674310674],[1630.1905927966534, -1.274170274170274, 0.0674310674310674],[1700.277318640955, -1.303030303030303, 0.07452907452907453],[1700.277318640955, -1.303030303030303, 0.07452907452907453],[1772.2414039383739, -1.3318903318903321, 0.08162708162708165],[1772.2414039383739, -1.3318903318903321, 0.08162708162708165],[1846.0828486889093, -1.3607503607503608, 0.08872508872508872],[1846.0828486889093, -1.3607503607503608, 0.08872508872508872],[1921.8016528925618, -1.3896103896103895, 0.09582309582309584],[1921.8016528925618, -1.3896103896103895, 0.09582309582309584],[1999.3978165493315, -1.4184704184704184, 0.10292110292110293],[1999.3978165493315, -1.4184704184704184, 0.10292110292110293],[2078.8713396592184, -1.4473304473304474, 0.11001911001911004],[2078.8713396592184, -1.4473304473304474, 0.11001911001911004],[2160.2222222222217, -1.4761904761904763, 0.11711711711711713],[2160.2222222222217, -1.4761904761904763, 0.11711711711711713],[2243.4504642383436, -1.505050505050505, 0.1242151242151242],[2243.4504642383436, -1.505050505050505, 0.1242151242151242],[2328.5560657075807, -1.533910533910534, 0.13131313131313133],[2328.5560657075807, -1.533910533910534, 0.13131313131313133],[2415.539026629936, -1.5627705627705628, 0.13841113841113842],[2415.539026629936, -1.5627705627705628, 0.13841113841113842],[2504.3993470054074, -1.5916305916305917, 0.14550914550914554],[2504.3993470054074, -1.5916305916305917, 0.14550914550914554],[2595.137026833996, -1.6204906204906204, 0.15260715260715263],[2595.137026833996, -1.6204906204906204, 0.15260715260715263],[2687.7520661157027, -1.6493506493506493, 0.15970515970515972],[2687.7520661157027, -1.6493506493506493, 0.15970515970515972],[2782.2444648505257, -1.6782106782106783, 0.16680316680316679],[2782.2444648505257, -1.6782106782106783, 0.16680316680316679],[2878.6142230384658, -1.7070707070707072, 0.17390117390117393],[2878.6142230384658, -1.7070707070707072, 0.17390117390117393],[2976.861340679523, -1.7359307359307357, 0.18099918099918103],[2976.861340679523, -1.7359307359307357, 0.18099918099918103],[3076.985817773696, -1.7647907647907648, 0.18809718809718812],[3076.985817773696, -1.7647907647907648, 0.18809718809718812],[3178.9876543209884, -1.7936507936507937, 0.19519519519519518],[3178.9876543209884, -1.7936507936507937, 0.19519519519519518],[3282.8668503213958, -1.8225108225108226, 0.20229320229320227],[3282.8668503213958, -1.8225108225108226, 0.20229320229320227],[3388.62340577492, -1.8513708513708511, 0.2093912093912094],[3388.62340577492, -1.8513708513708511, 0.2093912093912094],[3496.2573206815637, -1.8802308802308803, 0.21648921648921654],[3496.2573206815637, -1.8802308802308803, 0.21648921648921654],[3605.7685950413224, -1.909090909090909, 0.22358722358722358],[3605.7685950413224, -1.909090909090909, 0.22358722358722358],[3717.1572288541993, -1.937950937950938, 0.23068523068523067],[3717.1572288541993, -1.937950937950938, 0.23068523068523067],[3830.423222120192, -1.966810966810967, 0.2377832377832378],[3830.423222120192, -1.966810966810967, 0.2377832377832378],[3945.566574839302, -1.995670995670996, 0.24488124488124485],[3945.566574839302, -1.995670995670996, 0.24488124488124485],[4062.5872870115286, -2.0245310245310244, 0.251979251979252],[4062.5872870115286, -2.0245310245310244, 0.251979251979252],[4181.485358636874, -2.0533910533910533, 0.2590772590772591],[4181.485358636874, -2.0533910533910533, 0.2590772590772591],[4302.260789715336, -2.0822510822510822, 0.26617526617526616],[4302.260789715336, -2.0822510822510822, 0.26617526617526616],[4424.913580246914, -2.111111111111111, 0.27327327327327333],[4424.913580246914, -2.111111111111111, 0.27327327327327333],[4549.443730231608, -2.13997113997114, 0.28037128037128034],[4549.443730231608, -2.13997113997114, 0.28037128037128034],[4675.8512396694205, -2.1688311688311686, 0.2874692874692875],[4675.8512396694205, -2.1688311688311686, 0.2874692874692875],[4804.136108560351, -2.1976911976911975, 0.29456729456729464],[4804.136108560351, -2.1976911976911975, 0.29456729456729464],[4934.298336904399, -2.226551226551227, 0.30166530166530164],[4934.298336904399, -2.226551226551227, 0.30166530166530164],[5066.337924701561, -2.2554112554112553, 0.30876330876330876],[5066.337924701561, -2.2554112554112553, 0.30876330876330876],[5200.254871951842, -2.2842712842712842, 0.31586131586131583],[5200.254871951842, -2.2842712842712842, 0.31586131586131583],[5336.049178655238, -2.313131313131313, 0.32295932295932295],[5336.049178655238, -2.313131313131313, 0.32295932295932295],[5473.720844811754, -2.341991341991342, 0.3300573300573301],[5473.720844811754, -2.341991341991342, 0.3300573300573301],[5613.269870421385, -2.370851370851371, 0.3371553371553371],[5613.269870421385, -2.370851370851371, 0.3371553371553371],[5754.696255484134, -2.3997113997114, 0.34425334425334414],[5754.696255484134, -2.3997113997114, 0.34425334425334414],[5898.0, -2.4285714285714284, 0.35135135135135137],]
#APM_Pareto_IGD_10000FE =[[0.010205496875, 17561.599999999995],[0.1317720745582025, 87.09981868968289],[0.44068881011380645, 9.924182071558425],[1.0065533224947725, 2.4555592441989753],[1.8989632306540605, 0.8746162741038939],[3.1875161535446317, 0.38540220346952136],[4.941809710119445, 0.19531526362669865],[7.231441519331462, 0.1092792075331203],[10.126009200133645, 0.06582217400359236],[13.695110371478949, 0.04197676770211053],[18.008342652320337, 0.02801686242995967],[23.135303661610777, 0.019407302890326744],[29.145591018303204, 0.013865257808379921],[36.10880234135061, 0.010167720867072707],[44.09453524970594, 0.007624632366564405],[53.172387362322155, 0.005829215029578094],[63.41195629815223, 0.004532520626731539],[74.88283967614909, 0.003577162729085564],[87.65463511526572, 0.002860772647284903],[101.79694023445509, 0.002315075962488137],[117.37935265267014, 0.0018935106003660877],[134.47146998886387, 0.0015636818697798978],[153.14288986198918, 0.0013026431297081505],[173.46320989099905, 0.0010938736907772206],[195.50202769484645, 0.0009253020346518248],[219.32894089248433, 0.0007879876051348998],[245.0135471028657, 0.0006752261603579098],[272.6254439449434, 0.0005819327214433092],[302.23422903767056, 0.0005042096270423044],]
# exp
APM_Pareto_IGD_10000FE =[[-64.97231685516915, 0.2622968768933999],[125.59746524370703, -0.268459610412952],[295.10476274521665, -0.5941844955923747],[307.0206683491758, -0.6237560504347024],[435.74428895711293, -0.8590294091131367],[595.9160081540281, -1.0302198890226077],[659.4063255858338, -1.174118180640566],[830.3299104247595, -1.3313184409142411],[1035.0986702126922, -1.6158260554000679],[1119.1874815057472, -1.6777409136347152],[1334.6206046656011, -1.762175892791877],[1469.2533582279152, -1.8976901093523988],[1576.5200030098608, -1.9201472607960106],[1745.1619332544115, -2.0550534923559867],[1844.0210822629388, -2.101724447934919],[1981.6542475655665, -2.161959443564057],[2136.7985977015087, -2.214174357322634],[2291.9542961504158, -2.2965689870324604],[2502.0346332417384, -2.39567550786583],[2649.928921108971, -2.4470666994235577],[2854.658110610769, -2.4731673769464786],[2917.0033688900016, -2.555057738442063],[3159.2146167886303, -2.609727119743567],[3295.368432267614, -2.6845356895433787],[3438.371400465051, -2.747976637346365],[3587.636824467514, -2.7740749784846837],[3709.886937604648, -2.8274344441019954],[3852.7116740442693, -2.8563225487775936],[3933.603707674637, -2.8944481426931543],]

optimal_front = json.load(open(dirname+address))


if obj_num == 3:
    axis_titles = ['f1', 'f2', 'f3']

    xs = np.zeros(len(optimal_front))
    ys = np.zeros(len(optimal_front))
    zs = np.zeros(len(optimal_front))
    for i in range(len(optimal_front)):
        xs[i]=optimal_front[i][0]
        ys[i]=optimal_front[i][1]
        zs[i]=optimal_front[i][2]
    fig = plt.figure(figsize=(15,10))
    ax = Axes3D(fig)
    ax.set_zlim3d(min(zs),max(zs))
    ax.set_xlim3d(min(xs),max(xs))
    ax.set_ylim3d(min(ys),max(ys))
    ax.set_xlabel(str(axis_titles[0]))
    ax.set_ylabel(str(axis_titles[1]))
    ax.set_zlabel(str(axis_titles[2]))
    ax.view_init(20,-110)
    plt.clabel(ax,fontsize=5)
    font = {'size':14}
    plt.rc('font',**font)
    ax.scatter(xs,ys,zs,c='r',s=10,marker='.')
    xs2 = np.zeros(len(APM_Pareto_IGD_10000FE))
    ys2 = np.zeros(len(APM_Pareto_IGD_10000FE))
    zs2 = np.zeros(len(APM_Pareto_IGD_10000FE))
    for i in range(len(APM_Pareto_IGD_10000FE)):
        xs2[i]=APM_Pareto_IGD_10000FE[i][0]
        ys2[i]=APM_Pareto_IGD_10000FE[i][1]
        zs2[i]=APM_Pareto_IGD_10000FE[i][2]
    ax.scatter(xs2,ys2,zs2,c='r',s=40,marker='o')
    plt.suptitle('Sranking_Expensive')
    plt.savefig('Sranking_Expensive.png')
    plt.show()

if obj_num == 2:
    temp1 = []
    del temp1[:]
    temp2 = []
    del temp2[:]
    """
    for x_ in APM_Pareto_IGD_10000FE:
        temp1.append(x_[0])
        temp2.append(x_[1])
    plt.scatter(temp1, temp2, c="b", s=40,marker='o')
    """
    temp3 = []
    del temp1[:]
    temp4 = []
    del temp2[:]
    for x_ in optimal_front:
        temp3.append(x_[0])
        temp4.append(x_[1])
    plt.scatter(temp3, temp4, c="b", s=0.1,marker='.')

    temp1 = []
    del temp1[:]
    temp2 = []
    del temp2[:]

    for x_ in APM_Pareto_IGD_10000FE:
        temp1.append(x_[0])
        temp2.append(x_[1])
    plt.scatter(temp1, temp2, c="b", s=40,marker='s')
    #plt.xlim(-242,-44)
    #plt.ylim(0,100)
    plt.suptitle('Constraint_dominancy_Expensive')                                 #  1. Constraint_dominancy  2. Dynamic 3. APM 4. Sadaptive 5. Sranking
    plt.savefig('Constraint_dominancy_Expensive.png')
    plt.show()